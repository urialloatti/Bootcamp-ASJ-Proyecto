<section class="row my-3">
  <div class="col"></div>
  <div class="col-6">
    <form #myForm="ngForm" (ngSubmit)="saveProduct()" class="form-control">
      <fieldset class="px-4">
        <div class="text-center my-4">
          <p class="h3 text-body-secondary">Cargar nuevo Producto</p>
        </div>
        <hr />
        <div class="mb-3">
          <label class="form-label">Proveedor</label>
          <select
            name="suplier"
            #suplier="ngModel"
            [(ngModel)]="currentProduct.suplierId"
            class="form-select"
            [disabled]="isUpdating"
          >
            <option
              value="{{ suplier.id }}"
              *ngFor="let suplier of supliersList"
            >
              {{ suplier.brand }}
            </option>
            <option value="-1" selected>Otro</option>
          </select>
        </div>
        <div class="mb-3">
          <label class="form-label">Categoría</label>
          <select
            name="category"
            #category="ngModel"
            [(ngModel)]="currentProduct.category"
            class="form-select"
          >
            <option value="Árboles">Árboles</option>
            <option value="Aromáticas">Aromáticas</option>
            <option value="Fertilizantes">Fertilizantes</option>
            <option value="Florales">Florales</option>
            <option value="Insecticidas">Insecticidas</option>
            <option value="Otro">Otro</option>
          </select>
        </div>
        <div class="mb-3">
          <label class="form-label">Nombre</label>
          <input
            type="text"
            name="name"
            #name="ngModel"
            [(ngModel)]="currentProduct.name"
            required
            minlength="4"
            maxlength="40"
            [ngClass]="name.errors ? '' : 'is-valid'"
            class="form-control"
          />
          <div class="form-text" *ngIf="productValidator.name">
            <p>Debe tener entre 4 y 40 caracteres.</p>
          </div>
        </div>
        <div class="mb-3">
          <label class="form-label">Descripción</label>
          <textarea
            name="description"
            #description="ngModel"
            [(ngModel)]="currentProduct.description"
            required
            [ngClass]="description.errors ? '' : 'is-valid'"
            class="form-control"
          ></textarea>
          <div class="form-text" *ngIf="productValidator.description">
            <p>Debe tener entre 1 y 500 caracteres.</p>
          </div>
        </div>
        <div class="mb-3">
          <label class="form-label">Precio</label>
          <input
            type="number"
            name="price"
            #price="ngModel"
            [(ngModel)]="currentProduct.price"
            required
            min="1"
            max="999999999"
            [ngClass]="price.errors ? '' : 'is-valid'"
            class="form-control"
          />
          <div class="form-text" *ngIf="productValidator.price">
            <p>Debe ser un número mayor de 0.</p>
          </div>
        </div>
      </fieldset>
      <div class="row m-4">
        <div class="col text-center">
          <button class="btn btn-secondary" type="submit">
            Cargar Producto
          </button>
        </div>
      </div>
    </form>
  </div>
  <div class="col"></div>
</section>

<shared-modal-saved
  *ngIf="flagNewProductCreated"
  [modalData]="{ section: 'Producto', path: '/products' }"
></shared-modal-saved>
